[gd_scene load_steps=19 format=3 uid="uid://kpqmljsmcfrv"]

[ext_resource type="Script" uid="uid://dumngckmby8mo" path="res://Scenes/main.gd" id="1_kln2b"]
[ext_resource type="PackedScene" uid="uid://sc7cdfed8olm" path="res://Scenes/Actors/Player/Player.tscn" id="2_kln2b"]
[ext_resource type="Script" uid="uid://cfywxakmer1g3" path="res://Scenes/stagecontroller.gd" id="3_4kpch"]
[ext_resource type="PackedScene" uid="uid://cq1mihhdvy4ge" path="res://Scenes/Other/scrolling_purple_space_background.tscn" id="4_rgh2o"]
[ext_resource type="Script" uid="uid://1qs36werbe8o" path="res://Scenes/UI/score.gd" id="4_v1gob"]
[ext_resource type="Texture2D" uid="uid://b7ommsejp8j8u" path="res://Assets/portrait/Commander_Portrait.png" id="7_4kpch"]
[ext_resource type="Script" uid="uid://cjk407wahqfjv" path="res://Components/SpeechLabel.gd" id="8_grg3l"]
[ext_resource type="AudioStream" uid="uid://c2lekl8la7mny" path="res://Assets/SFX/click1.ogg" id="9_frkhe"]
[ext_resource type="Script" uid="uid://cv6wgnyjde582" path="res://Components/AudioJitterPlayer.gd" id="10_1p5hy"]
[ext_resource type="Script" uid="uid://b8n8kdchxjfng" path="res://Components/StateMachine.gd" id="12_grg3l"]
[ext_resource type="Script" uid="uid://b08v8gwfw25py" path="res://Scenes/stage.gd" id="13_1p5hy"]
[ext_resource type="Script" uid="uid://cxgogrwp6w8ro" path="res://Scenes/paused.gd" id="14_h1m7h"]
[ext_resource type="Script" uid="uid://cku8ukbdttkql" path="res://Scenes/main_menu.gd" id="15_erwvk"]
[ext_resource type="Script" uid="uid://i8bgsjjdlqik" path="res://Scenes/mission_brief.gd" id="15_h1m7h"]

[sub_resource type="WorldBoundaryShape2D" id="WorldBoundaryShape2D_4kpch"]
distance = -540.0

[sub_resource type="WorldBoundaryShape2D" id="WorldBoundaryShape2D_grg3l"]
normal = Vector2(1, 0)

[sub_resource type="WorldBoundaryShape2D" id="WorldBoundaryShape2D_frkhe"]
normal = Vector2(0, 1)
distance = 375.0

[sub_resource type="WorldBoundaryShape2D" id="WorldBoundaryShape2D_1p5hy"]
normal = Vector2(-1, 0)
distance = -320.0

[node name="Main" type="Node"]
script = ExtResource("1_kln2b")

[node name="Scrolling Purple Space Background" parent="." instance=ExtResource("4_rgh2o")]
process_mode = 3

[node name="Stage" type="Node" parent="."]
unique_name_in_owner = true
script = ExtResource("3_4kpch")

[node name="Bullets" type="Node" parent="."]
unique_name_in_owner = true

[node name="Player" parent="." instance=ExtResource("2_kln2b")]
unique_name_in_owner = true
visible = false
position = Vector2(161, 479)
speed = 250.0
dash_speed = 400.0

[node name="Player Boundaries" type="Node" parent="."]

[node name="Boundaries" type="StaticBody2D" parent="Player Boundaries"]
visible = false
collision_layer = 16

[node name="Bottom" type="CollisionShape2D" parent="Player Boundaries/Boundaries"]
shape = SubResource("WorldBoundaryShape2D_4kpch")

[node name="Left" type="CollisionShape2D" parent="Player Boundaries/Boundaries"]
shape = SubResource("WorldBoundaryShape2D_grg3l")

[node name="Top" type="CollisionShape2D" parent="Player Boundaries/Boundaries"]
shape = SubResource("WorldBoundaryShape2D_frkhe")

[node name="Right" type="CollisionShape2D" parent="Player Boundaries/Boundaries"]
shape = SubResource("WorldBoundaryShape2D_1p5hy")

[node name="UI" type="Node" parent="."]
unique_name_in_owner = true

[node name="Score" type="Label" parent="UI"]
unique_name_in_owner = true
visible = false
offset_right = 47.0
offset_bottom = 23.0
text = "Score:"
script = ExtResource("4_v1gob")

[node name="mission brief" type="Node" parent="UI"]
unique_name_in_owner = true
process_mode = 3

[node name="CommandPortrait" type="TextureRect" parent="UI/mission brief"]
unique_name_in_owner = true
visible = false
offset_top = 446.99997
offset_right = 1024.0
offset_bottom = 1471.0
scale = Vector2(0.09, 0.09)
size_flags_horizontal = 0
texture = ExtResource("7_4kpch")

[node name="Commander1" type="Label" parent="UI/mission brief" node_paths=PackedStringArray("typeSound")]
unique_name_in_owner = true
visible = false
offset_left = 93.0
offset_top = 451.0
offset_right = 133.0
offset_bottom = 474.0
script = ExtResource("8_grg3l")
dialogue = "Thank you for coming Ace
Your next mission is of the 
highest import"
typeSound = NodePath("../AudioJitterPlayer")
metadata/_custom_type_script = "uid://cjk407wahqfjv"

[node name="Commander2" type="Label" parent="UI/mission brief" node_paths=PackedStringArray("typeSound")]
unique_name_in_owner = true
visible = false
offset_left = 93.0
offset_top = 451.0
offset_right = 133.0
offset_bottom = 474.0
script = ExtResource("8_grg3l")
dialogue = "We've just recieved intel
that the insurgents are
transporting a PK weapon"
typeSound = NodePath("../AudioJitterPlayer")
metadata/_custom_type_script = "uid://cjk407wahqfjv"

[node name="Commander3" type="Label" parent="UI/mission brief" node_paths=PackedStringArray("typeSound")]
unique_name_in_owner = true
visible = false
offset_left = 93.0
offset_top = 451.0
offset_right = 133.0
offset_bottom = 474.0
script = ExtResource("8_grg3l")
dialogue = "Your mission is simple.
You are to eliminate as
much of the convoy as"
typeSound = NodePath("../AudioJitterPlayer")
metadata/_custom_type_script = "uid://cjk407wahqfjv"

[node name="Commander4" type="Label" parent="UI/mission brief" node_paths=PackedStringArray("typeSound")]
unique_name_in_owner = true
visible = false
offset_left = 93.0
offset_top = 451.0
offset_right = 133.0
offset_bottom = 474.0
script = ExtResource("8_grg3l")
dialogue = "possible and neutralize
the super freighter carrying
the planet killer weapon."
typeSound = NodePath("../AudioJitterPlayer")
metadata/_custom_type_script = "uid://cjk407wahqfjv"

[node name="Commander5" type="Label" parent="UI/mission brief" node_paths=PackedStringArray("typeSound")]
unique_name_in_owner = true
visible = false
offset_left = 93.0
offset_top = 451.0
offset_right = 133.0
offset_bottom = 474.0
script = ExtResource("8_grg3l")
dialogue = "Good Luck Ace!!!
the Federation of Old Earth
is counting on you!!!"
typeSound = NodePath("../AudioJitterPlayer")
metadata/_custom_type_script = "uid://cjk407wahqfjv"

[node name="AudioJitterPlayer" type="AudioStreamPlayer" parent="UI/mission brief"]
stream = ExtResource("9_frkhe")
script = ExtResource("10_1p5hy")
metadata/_custom_type_script = "uid://cv6wgnyjde582"

[node name="SpeechTimer" type="Timer" parent="UI/mission brief"]
unique_name_in_owner = true
wait_time = 2.0
one_shot = true

[node name="Main Menu" type="Node" parent="UI"]
unique_name_in_owner = true

[node name="MMUI" type="Control" parent="UI/Main Menu"]
unique_name_in_owner = true
process_mode = 2
layout_mode = 3
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -58.0
offset_right = 12.0
grow_horizontal = 2
grow_vertical = 2
size_flags_vertical = 4

[node name="Label" type="Label" parent="UI/Main Menu/MMUI"]
layout_mode = 1
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -12.0
offset_top = -215.0
offset_right = 58.0
offset_bottom = -164.0
grow_horizontal = 2
grow_vertical = 2
size_flags_horizontal = 0
text = "PROJECT 
  IRON"

[node name="marginC" type="MarginContainer" parent="UI/Main Menu/MMUI"]
layout_mode = 0
offset_right = 40.0
offset_bottom = 40.0

[node name="vertiButtons" type="VBoxContainer" parent="UI/Main Menu/MMUI/marginC"]
layout_mode = 2

[node name="Mission Briefing" type="Button" parent="UI/Main Menu/MMUI/marginC/vertiButtons"]
unique_name_in_owner = true
layout_mode = 2
size_flags_horizontal = 4
text = "Mission Briefing"

[node name="Begin Mission" type="Button" parent="UI/Main Menu/MMUI/marginC/vertiButtons"]
unique_name_in_owner = true
layout_mode = 2
text = "Begin Mission
"

[node name="Exit" type="Button" parent="UI/Main Menu/MMUI/marginC/vertiButtons"]
layout_mode = 2
text = "Exit"

[node name="debug" type="Button" parent="UI/Main Menu/MMUI/marginC/vertiButtons"]
layout_mode = 2
text = "Debug Stage
"

[node name="Game Over" type="Node" parent="UI"]

[node name="GOUI" type="Control" parent="UI/Game Over"]
unique_name_in_owner = true
process_mode = 2
visible = false
z_index = 99
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2

[node name="ScreenDim" type="ColorRect" parent="UI/Game Over/GOUI"]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
color = Color(0.1494745, 0.14947453, 0.14947447, 0.75686276)

[node name="GOContainer" type="VBoxContainer" parent="UI/Game Over/GOUI"]
layout_mode = 1
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -43.5
offset_top = -29.0
offset_right = 43.5
offset_bottom = 29.0
grow_horizontal = 2
grow_vertical = 2

[node name="GameOver" type="Label" parent="UI/Game Over/GOUI/GOContainer"]
layout_mode = 2
text = "Game Over"

[node name="Restart" type="Button" parent="UI/Game Over/GOUI/GOContainer"]
layout_mode = 2
text = "Restart"

[node name="PauseMenu" type="Node" parent="UI"]

[node name="PMUI" type="Control" parent="UI/PauseMenu"]
visible = false
layout_mode = 3
anchors_preset = 0
offset_right = 40.0
offset_bottom = 40.0

[node name="Label" type="Label" parent="UI/PauseMenu/PMUI"]
layout_mode = 1
offset_right = 319.0
offset_bottom = 261.0
text = "GAME PAUSED"
horizontal_alignment = 1
vertical_alignment = 1

[node name="MarginContainer" type="MarginContainer" parent="UI/PauseMenu/PMUI"]
layout_mode = 1
anchors_preset = 5
anchor_left = 0.5
anchor_right = 0.5
offset_left = 83.0
offset_top = 157.0
offset_right = 195.0
offset_bottom = 289.0
grow_horizontal = 2

[node name="VBoxContainer" type="VBoxContainer" parent="UI/PauseMenu/PMUI/MarginContainer"]
layout_mode = 2

[node name="Button2" type="Button" parent="UI/PauseMenu/PMUI/MarginContainer/VBoxContainer"]
layout_mode = 2
text = "Unpause
"

[node name="Button" type="Button" parent="UI/PauseMenu/PMUI/MarginContainer/VBoxContainer"]
layout_mode = 2
text = "Main Menu "

[node name="StateMachine" type="Node" parent="." node_paths=PackedStringArray("initialState")]
process_mode = 3
script = ExtResource("12_grg3l")
initialState = NodePath("mainMenu")
metadata/_custom_type_script = "uid://b8n8kdchxjfng"

[node name="stage" type="Node" parent="StateMachine"]
script = ExtResource("13_1p5hy")
metadata/_custom_type_script = "uid://cu5j8q5xp1nm4"

[node name="paused" type="Node" parent="StateMachine"]
script = ExtResource("14_h1m7h")
metadata/_custom_type_script = "uid://cu5j8q5xp1nm4"

[node name="mainMenu" type="Node" parent="StateMachine"]
script = ExtResource("15_erwvk")
metadata/_custom_type_script = "uid://cu5j8q5xp1nm4"

[node name="missionBrief" type="Node" parent="StateMachine" node_paths=PackedStringArray("speechList")]
script = ExtResource("15_h1m7h")
speechList = [NodePath("../../UI/mission brief/Commander1"), NodePath("../../UI/mission brief/Commander2"), NodePath("../../UI/mission brief/Commander3"), NodePath("../../UI/mission brief/Commander4"), NodePath("../../UI/mission brief/Commander5")]
metadata/_custom_type_script = "uid://cu5j8q5xp1nm4"

[connection signal="PlayerDeath" from="Player" to="StateMachine/stage" method="_on_player_player_death"]
[connection signal="finished" from="UI/mission brief/Commander1" to="StateMachine/missionBrief" method="_on_speech_finished"]
[connection signal="finished" from="UI/mission brief/Commander2" to="StateMachine/missionBrief" method="_on_speech_finished"]
[connection signal="finished" from="UI/mission brief/Commander3" to="StateMachine/missionBrief" method="_on_speech_finished"]
[connection signal="finished" from="UI/mission brief/Commander4" to="StateMachine/missionBrief" method="_on_speech_finished"]
[connection signal="finished" from="UI/mission brief/Commander5" to="StateMachine/missionBrief" method="_on_speech_finished"]
[connection signal="timeout" from="UI/mission brief/SpeechTimer" to="StateMachine/missionBrief" method="_on_speech_timer_timeout"]
[connection signal="pressed" from="UI/Main Menu/MMUI/marginC/vertiButtons/Mission Briefing" to="StateMachine/mainMenu" method="_on_main_menu_start_mission_brief"]
[connection signal="pressed" from="UI/Main Menu/MMUI/marginC/vertiButtons/Begin Mission" to="StateMachine/mainMenu" method="_on_main_menu_start_game"]
[connection signal="pressed" from="UI/Main Menu/MMUI/marginC/vertiButtons/Exit" to="StateMachine/mainMenu" method="_on_exit_pressed"]
[connection signal="pressed" from="UI/Main Menu/MMUI/marginC/vertiButtons/debug" to="." method="_on_button_pressed"]
[connection signal="pressed" from="UI/Game Over/GOUI/GOContainer/Restart" to="." method="_on_restart_pressed"]
